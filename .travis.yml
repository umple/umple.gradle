language: groovy

before_install:
  - if [[ "${TRAVIS_OS_NAME}" == "osx" ]]; then
      brew update ;
      brew outdated wget || brew upgrade wget ;
      brew install groovy ;
    fi
  # Get the latest umple.jar
  - wget 'http://cruise.eecs.uottawa.ca/umpleonline/scripts/umple.jar' -O libs/umple-latest.jar

cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.m2

# TODO Once this is published in the gradle portal, we can use this
# deploy:
#   provider: script
#   # No need to rebuild all archives, let it do its thing.
#   skip_cleanup: true
#   script: ./gradlew publishPlugins
#   on:
#     tags: true

# We need to use matrix-style declaration because jdk_switcher isn't a no-op on osx.
matrix:
  include:
    - os: linux
      jdk: oraclejdk8
    - os: osx

notifications:
  email:
    on_success: change
    on_failure: change